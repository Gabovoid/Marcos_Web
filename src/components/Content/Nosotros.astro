---
import { Image } from "astro:assets";
import Vinilo from "../../assets/Vinilooo.webp";
import Palo from "../../assets/palo.png";
import Foto from "../../assets/Presentacion.webp";
import aboutText from "../../data/about.js";
---

<section class="bg-[#1A1A1A] text-white py-25 relative">
  <div class="text-center mb-12 mt-10">
    <h2 class="text-4xl font-bold text-white tracking-tight mb-2">DETRÁS DEL DISCO</h2>
    
  </div>

  <div class="w-100% h-100hvp flex flex-row">
    <div class="relative ml-10 mt-2 w-[800px] h-1/2">
      <div class="w-[380px] flex justify-end items-end relative z-10">
        <button
          id="playBtn"
          class="border-2 px-4 py-2 rounded-full transition transform hover:scale-105 cursor-pointer relative z-10 w-[130px] text-center">
          Descúbrenos
        </button>
      </div>

      <!-- Vinilo -->
      <Image
        id="vinilo"
        src={Vinilo}
        alt="Cargado..."
        class="w-[650px] h-[700px] object-cover filter brightness-75 grayscale"
      />

      <!-- Palo -->
      <div
        class="w-[450px] h-[500px] origin-top-right absolute top-30 right-0"
        id="palo"
      >
        <Image
          id="brazo"
          src={Palo}
          alt="Cargado..."
          class="w-full h-full filter brightness-75 grayscale brazo-inicial"
        />
      </div>
    </div>

    <div class="w-[640px] flex-1 mr-10 p-8 rounded-2xl bg-gradient-to-br from-zinc-900 to-black mt-10 border border-zinc-800 shadow-2xl">
        <div class="mb-3 h-[200px]">
          <h1 class="text-white text-[25px] font-bold mb-1 tracking-tight">¿Quiénes somos?</h1>
          <p id="quienes" class="text-gray-300 leading-relaxed text-[16px] h-[180px] overflow-hidden text-justify"></p>
        </div>
        <div class="mb-3 h-[250px]">
          <h1 class="text-white text-[25px] font-bold mb-1 tracking-tight">Nuestra historia</h1>
          <p id="historia" class="text-gray-300 leading-relaxed text-[16px] h-[210px] overflow-hidden text-justify"></p>
        </div>
        <div class="mb-3 h-[140px]">
          <h1 class="text-white text-[25px] font-bold mb-1 tracking-tight">Misión</h1>
          <p id="mision" class="text-gray-300 leading-relaxed text-[16px] h-[80px] overflow-hidden text-justify"></p>
        </div>
        <div class="h-[140px]">
          <h1 class="text-white text-[25px] font-bold mb-1 tracking-tight">Visión</h1>
          <p id="vision" class="text-gray-300 leading-relaxed text-[16px] h-[80px] overflow-hidden text-justify"></p>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="w-full h-[1px] bg-gradient-to-r from-transparent via-gray-400 to-transparent"></div>

<section class="bg-[#1A1A1A] py-20">
  <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-white tracking-tight mb-2">DETRÁS DEL CÓDIGO</h2>
  </div>

  <div class="flex items-center justify-center">
    <div class="max-w-2xl bg-gradient-to-br from-zinc-900 to-black border border-zinc-800 rounded-2xl shadow-2xl overflow-hidden">
      <div class="md:flex">
        <div class="md:w-1/3 bg-zinc-900 p-6 flex flex-col items-center border-r border-zinc-800">
          <Image
            src={Foto}
            alt="Developer"
            class="w-32 h-32 rounded-full object-cover border-4 border-zinc-700 mb-4"
          />
          <span class="bg-zinc-700 text-gray-300 text-xs px-3 py-1 rounded-full mb-4">Web Developer</span>
          
          <div class="w-full space-y-3 text-sm">
            <div class="flex items-center text-gray-400">
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-xs">Lima, Perú</span>
            </div>
            <div class="flex items-center text-gray-400">
              <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
              </svg>
              <span class="text-xs">Estudiante - 19 años</span>
            </div>
          </div>

          <a href="https://github.com/Gabovoid" target="_blank" class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-zinc-700 rounded-lg hover:bg-zinc-600 transition transform hover:scale-105">
            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.385-1.335-1.755-1.335-1.755-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/>
            </svg>
            GitHub
          </a>
        </div>

        <div class="md:w-2/3 p-6">
          <h5 class="text-2xl font-bold text-white mb-7">Daren Gabriel Flores Barba</h5>


          <div class="mb-6">
            <h6 class="text-sm font-semibold text-gray-300 mb-2 uppercase tracking-wider">Sobre mí</h6>
            <p class="text-gray-400 text-sm leading-relaxed">
              "Si funciona, no le muevas."
            </p>
          </div>

          <div class="mb-6">
            <h6 class="text-sm font-semibold text-gray-300 mb-3 uppercase tracking-wider">Tecnologías</h6>
            <div class="flex flex-wrap gap-2">
              <span class="px-3 py-1 bg-zinc-800 text-gray-300 text-xs rounded-full">HTML</span>
              <span class="px-3 py-1 bg-zinc-800 text-gray-300 text-xs rounded-full">CSS</span>
              <span class="px-3 py-1 bg-zinc-800 text-gray-300 text-xs rounded-full">JavaScript</span>
              <span class="px-3 py-1 bg-zinc-800 text-gray-300 text-xs rounded-full">Git</span>
            </div>
          </div>

          <div>
            <h6 class="text-sm font-semibold text-gray-300 mb-3 uppercase tracking-wider">Proyectos</h6>
            <div class="space-y-3">
              <div>
                <p class="text-white text-sm font-medium">Vinyl Void</p>
                <p class="text-gray-400 text-xs">Tienda de venta de vinilos online • 2025</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline define:vars={{ aboutText }}>
  document.addEventListener("DOMContentLoaded", () => {
    const playBtn = document.getElementById("playBtn");
    const brazo = document.getElementById("brazo");
    const vinilo = document.getElementById("vinilo");
    
    const quienes = document.getElementById("quienes");
    const historia = document.getElementById("historia");
    const mision = document.getElementById("mision");
    const vision = document.getElementById("vision");

    let tocando = false;
    let escribiendo = false;

    function escribirTexto(elemento, texto, velocidad = 30) {
      return new Promise((resolve) => {
        let i = 0;
        elemento.textContent = "";
        
        const intervalo = setInterval(() => {
          if (i < texto.length) {
            elemento.textContent += texto.charAt(i);
            i++;
          } else {
            clearInterval(intervalo);
            resolve();
          }
        }, velocidad);
      });
    }

    async function escribirTodosLosTextos() {
      if (escribiendo) return;
      escribiendo = true;
      
      playBtn.style.opacity = "0.5";
      playBtn.style.pointerEvents = "none";
      
      await escribirTexto(quienes, aboutText.desc, 20);
      await escribirTexto(historia, aboutText.historia, 20);
      await escribirTexto(mision, aboutText.mision, 20);
      await escribirTexto(vision, aboutText.vision, 20);
      
      playBtn.style.opacity = "1";
      playBtn.style.pointerEvents = "auto";
      playBtn.textContent = "Detener";
      
      escribiendo = false;
    }

    playBtn.addEventListener("click", () => {
      if (!tocando) {
        tocando = true;
        brazo.classList.remove("brazo-saliendo");
        brazo.classList.add("brazo-entrando");
        vinilo.classList.add("vinilo-animado");
        vinilo.classList.add("delay-rotacion");
        
        if (!escribiendo && quienes.textContent === "") {
          playBtn.textContent = "Escribiendo...";
          
          setTimeout(() => {
            escribirTodosLosTextos();
          }, 1000);
        } else {
          playBtn.textContent = "Detener";
        }
      } else {
        tocando = false;
        brazo.classList.remove("brazo-entrando");
        brazo.classList.add("brazo-saliendo");
        vinilo.classList.remove("vinilo-animado");
        
        if (quienes.textContent !== "") {
          playBtn.textContent = "Reproducir";
        } else {
          playBtn.textContent = "Descúbrenos";
        }
      }
    });
  });
</script>